
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯æ‰“å·¥ä½“éªŒæŠ¥å‘Š HK-R v6.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* iOS ç³»ç»Ÿå­—ä½“ä¼˜å…ˆï¼Œé…åˆæš–è‰²èƒŒæ™¯ */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, "PingFang HK", "Heiti TC", sans-serif; 
            background-color: #fdf8f6; /* æš–ç™½åº•è‰² */
            color: #44403c; /* Stone-700 æš–æ·±ç° */
        }

        /* ğŸŒŸ iOS é£å¼¥æ•£èƒŒæ™¯ */
        .ios-mesh-bg {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -10;
            overflow: hidden;
            background: #fffbf5;
        }
        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.6;
            animation: float 10s infinite ease-in-out;
        }
        .blob-1 { top: -10%; left: -10%; width: 500px; height: 500px; background: #ffedd5; } /* æ©™è‰²å…‰æ™• */
        .blob-2 { bottom: -10%; right: -10%; width: 400px; height: 400px; background: #fce7f3; animation-delay: 2s; } /* ç²‰è‰²å…‰æ™• */
        .blob-3 { top: 40%; left: 30%; width: 300px; height: 300px; background: #fff1f2; animation-delay: 4s; } /* ç«ç‘°æ·¡å…‰ */

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, -20px); }
        }

        /* ğŸŒŸ æ¯›ç»ç’ƒå¡ç‰‡æ•ˆæœ */
        .glass-card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 10px 40px -10px rgba(255, 166, 122, 0.15); /* æš–æ©™è‰²æŠ•å½± */
        }

        /* æˆªå›¾ä¸“ç”¨é¢œè‰²ï¼šæ·±ç –çº¢è‰² */
        .score-text { color: #c2410c; } 

        .fade-enter-active, .fade-leave-active { transition: opacity 0.4s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="pb-20 min-h-screen">

<div class="ios-mesh-bg">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
</div>

<div id="app" class="max-w-2xl mx-auto p-4 relative z-10">

    <transition name="fade" mode="out-in">
        <div v-if="showWelcome" key="welcome" class="flex flex-col items-center justify-center min-h-[90vh] py-6">
            
            <div class="mb-4 text-7xl drop-shadow-sm">ğŸ‡­ğŸ‡°</div>
            
            <h1 class="text-4xl font-black text-stone-800 mb-2 text-center tracking-tight">
                é¦™æ¸¯æ‰“å·¥<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-rose-500">ä½“éªŒ</span>æŠ¥å‘Š
            </h1>
            <p class="text-stone-400 text-xs mb-8 tracking-[0.2em] uppercase font-medium">HK Work Experience Report (v6.1)</p>

            <div class="glass-card p-6 rounded-3xl w-full mb-8">
                
                <h3 class="font-bold text-stone-700 mb-4 text-sm flex items-center">
                    <span class="bg-orange-100 text-orange-600 py-0.5 px-2 rounded-full text-xs mr-2 font-bold">Core</span>
                    ç»ˆææ€§ä»·æ¯”å…¬å¼
                </h3>
                
                <div class="bg-white/50 p-4 rounded-2xl border border-white/60 overflow-x-auto no-scrollbar mb-6">
                    <div class="min-w-[300px] flex items-center justify-center font-serif text-stone-600">
                        <span class="font-bold text-2xl mr-3 italic font-serif text-orange-600">R =</span>
                        <div class="flex flex-col items-center text-[10px] md:text-xs leading-relaxed font-medium">
                            <div class="border-b-2 border-stone-300 px-2 pb-1 mb-1 text-orange-700 whitespace-nowrap">
                                ç»¼åˆæ—¥è–ª Ã— è¡Œä¸šç³»æ•° Ã— æ¶¦å­¦å±æ€§ Ã— WFHåŠ æˆ Ã— ç¯å¢ƒçˆ½åº¦
                            </div>
                            <div class="text-stone-500 whitespace-nowrap">
                                å¹´é¾„ Ã— [ åä¹‰å·¥æ—¶ + é€šå‹¤ - (0.5Ã—æ‘¸é±¼) ] Ã— æˆ¿ç§Ÿç—›æ„Ÿ Ã— å­¦å†æº¢ä»·
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="font-bold text-stone-700 mb-4 text-sm flex items-center">
                    <span class="bg-rose-100 text-rose-600 py-0.5 px-2 rounded-full text-xs mr-2 font-bold">Scale</span>
                    Rå€¼è¯„çº§æ ‡å‡†
                </h3>
                
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-slate-200/50 p-3 rounded-2xl border border-white/50">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-lg">ğŸ’€</span>
                            <span class="text-[10px] font-bold bg-stone-800 text-white px-1.5 py-0.5 rounded-full">R &lt; 3.3</span>
                        </div>
                        <div class="text-xs font-bold text-stone-700">åœ°ç‹±ç”Ÿå­˜çº¿</div>
                        <div class="text-[9px] text-stone-400 mt-0.5">è´Ÿèµ„äº§æ‰“å·¥ï¼Œå»ºè®®å¿«é€ƒ</div>
                    </div>
                    <div class="bg-amber-50/70 p-3 rounded-2xl border border-white/50">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-lg">ğŸ˜</span>
                            <span class="text-[10px] font-bold bg-yellow-400 text-white px-1.5 py-0.5 rounded-full">3.3-6.0</span>
                        </div>
                        <div class="text-xs font-bold text-stone-600">æ ‡å‡†æ¸¯ç•œçº¿</div>
                        <div class="text-[9px] text-stone-400 mt-0.5">æ‰‹åœå£åœï¼Œæ— æƒŠæ— é™©</div>
                    </div>
                    <div class="bg-orange-50/80 p-3 rounded-2xl border border-orange-100/50">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-lg">â˜•</span>
                            <span class="text-[10px] font-bold bg-orange-500 text-white px-1.5 py-0.5 rounded-full">6.0-10.5</span>
                        </div>
                        <div class="text-xs font-bold text-orange-700">èˆ’é€‚ä¸­äº§çº¿</div>
                        <div class="text-[9px] text-orange-400 mt-0.5">ç”Ÿæ´»æœ‰å¾—æ‹£ï¼Œå‡æœŸæœ‰å¾—é£</div>
                    </div>
                    <div class="bg-rose-50/80 p-3 rounded-2xl border border-rose-100/50">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-lg">ğŸ¦„</span>
                            <span class="text-[10px] font-bold bg-rose-500 text-white px-1.5 py-0.5 rounded-full">&gt; 10.5</span>
                        </div>
                        <div class="text-xs font-bold text-rose-700">ç¥ä»™ç¬‹å·¥</div>
                        <div class="text-[9px] text-rose-400 mt-0.5">ç³»ç»Ÿæ¼æ´ï¼Œç»å¯¹æœºå¯†</div>
                    </div>
                </div>
            </div>

            <button 
                @click="startTest" 
                class="w-full max-w-sm bg-gradient-to-r from-orange-500 to-rose-500 hover:from-orange-600 hover:to-rose-600 text-white font-bold py-4 px-8 rounded-full text-lg shadow-[0_10px_20px_-5px_rgba(244,63,94,0.4)] transform transition hover:scale-105 active:scale-95 flex items-center justify-center">
                <span>ç«‹å³å¼€å§‹æµ‹è¯„</span>
                <span class="ml-2">ğŸ‘‰</span>
            </button>
            
            <p class="mt-8 text-[10px] text-stone-300 font-medium">Powered by HK-R Algorithm</p>
        </div>

        <div v-else key="calculator">
            
            <div class="flex items-center mb-6 pt-2">
                <button @click="showWelcome = true" class="text-stone-400 hover:text-orange-500 text-sm flex items-center font-medium transition">
                    <span class="mr-1">â†</span> è¿”å›é¦–é¡µ
                </button>
            </div>

            <div class="text-center mb-8">
                <h1 class="text-3xl font-black text-stone-800 mb-2">æ•°æ®å½•å…¥</h1>
                <p class="text-stone-500 text-xs">è¯·è¾“å…¥çœŸå®èŒåœºå‚æ•°ï¼Œæ‰€æœ‰æ•°æ®å°†åœ¨ç¦»å¼€ç½‘é¡µæ—¶ä¸¢å¼ƒ</p>
            </div>

            <div class="glass-card rounded-3xl p-6 mb-8 space-y-6">
                
                <div class="border-b border-stone-100 pb-4">
                    <h2 class="text-lg font-bold text-orange-600 mb-4 flex items-center">
                        ğŸ’° åˆ†å­ï¼šæ”¶ç›Šä¸åŠ æˆ
                    </h2>
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <label class="block text-xs font-bold text-stone-500 uppercase mb-1">æœˆè–ª (HKD)</label>
                            <input v-model.number="form.salary" type="number" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-orange-200 outline-none transition" placeholder="20000">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-stone-500 uppercase mb-1">å¹´è–ªæœˆæ•°</label>
                            <input v-model.number="form.months" type="number" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-orange-200 outline-none transition" placeholder="12">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">å¹´åº¦å›ºå®šæ´¥è´´ (Bonus/Allowance)</label>
                        <input v-model.number="form.allowance" type="number" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-orange-200 outline-none transition" placeholder="0">
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">è¡Œä¸š (Industry Caste)</label>
                        <select v-model="form.industry" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-orange-200 outline-none transition appearance-none">
                            <option value="1.3">Tier 0: åŒ»ç”Ÿ/AO/EO/å…¬è¥æœºæ„ (1.3)-é“é¥­ç¢—ï¼ŒæŠ—è¡°é€€ï¼Œç¤¾ä¼šåœ°ä½é«˜</option>
                            <option value="1.2">Tier 1: æŠ•è¡Œ/Hedge Fund/é¡¶çº§å¾‹æ‰€ (1.2)-é’±ç»™å¾—å®åœ¨å¤ªå¤šï¼Œå“ªæ€•ç´¯ä¹Ÿå€¼å¾—</option>
                            <option value="1.1">Tier 2: IT/MNC/é“¶è¡Œä¸­åå° (1.1)-ä½“é¢ï¼Œè–ªæ°´å°šå¯</option>
                            <option value="1.0">Tier 3: æ™®é€šæ–‡èŒ/æ•™è‚²/ä¼ åª’ (1.0)-åŸºå‡†çº¿</option>
                            <option value="0.9">Tier 4: é¤é¥®/é›¶å”®/åŠ³åŠ¨å¯†é›† (0.9)-æ‰‹åœå£åœï¼Œæ€§ä»·æ¯”ä½</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">æ¶¦å­¦/è·³æ¿å±æ€§</label>
                        <select v-model="form.migration" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-orange-200 outline-none transition">
                            <option value="1.2">é‡‘è·³æ¿: åŒ…Global Transfer (1.2)</option>
                            <option value="1.1">é•€é‡‘: çŸ¥åä¼ä¸šï¼Œå±¥å†è®¤å¯é«˜ (1.1)</option>
                            <option value="1.0">æœ¬åœ°: çº¯æ¸¯èµ„/ä¸­èµ„ä¸­å°ä¼ (1.0)</option>
                            <option value="0.9">é”æ­»: æœ‰Bondæˆ–è¡Œä¸šæ•æ„Ÿ (0.9)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">WFH è‡ªç”±åº¦</label>
                        <select v-model="form.wfh" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-orange-200 outline-none transition">
                            <option value="1.3">å¤©å ‚: Fully Remote / æ•°å­—æ¸¸æ°‘ (1.3)</option>
                            <option value="1.2">çˆ½: æ¯å‘¨ 3-4 å¤© (1.2)</option>
                            <option value="1.1">æ©èµ: æ¯å‘¨ 1-2 å¤© (1.1)</option>
                            <option value="1.0">åç‰¢: Full Office (1.0)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">ç¯å¢ƒä¸å¼€å¿ƒæŒ‡æ•° (Vibe Check)</label>
                        <select v-model="form.vibeScore" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-orange-200 outline-none transition">
                            <option value="1.2">1.2 (æçˆ½): ä¸­ç¯/ICC + å¤–ä¼æ°›å›´</option>
                            <option value="1.1">1.1 (èˆ’é€‚): åœ°æ®µå¥½ æˆ– T8ä¸ç”¨åŠå…¬</option>
                            <option value="1.0">1.0 (æ ‡å‡†): æ™®é€šå†™å­—æ¥¼ / æ— åŠŸæ— è¿‡</option>
                            <option value="0.95">0.95 (ç•¥å·®): æ—§å·¥ä¸šåŒº æˆ– æ¸¯å¼å®¶æ—ç®¡ç†</option>
                            <option value="0.9">0.9 (å‹æŠ‘): ä½ç½®å·® + æ–‡åŒ–å‹æŠ‘ + T8è¦WFH</option>
                        </select>
                    </div>
                </div>

                <div>
                    <h2 class="text-lg font-bold text-rose-600 mb-4 flex items-center">
                        ğŸ’€ åˆ†æ¯ï¼šæˆæœ¬ä¸æ¶ˆè€—
                    </h2>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">å¹´é¾„ (Age)</label>
                        <input v-model.number="form.age" type="number" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                        <div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                        <div>
                            <label class="block text-xs font-bold text-stone-500 uppercase mb-1">ä¸Šç­æ—¶é—´</label>
                            <input v-model="form.startTime" type="time" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-stone-500 uppercase mb-1">ä¸‹ç­æ—¶é—´</label>
                            <input v-model="form.endTime" type="time" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">åˆä¼‘æ—¶é•¿ (å°æ—¶)</label>
                        <input v-model.number="form.lunchHour" type="number" step="0.5" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                    </div>
                    <div class="mb-3">
                        <label class="inline-flex items-center text-xs font-bold text-rose-500">
                            <input type="checkbox" v-model="form.isLateOT" class="mr-2 rounded text-rose-500 focus:ring-rose-500"> å¸¸æ€åŒ–æ— å¿OTè‡³21:00å (æ—¶é•¿x1.1)
                        </label>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">å•ç¨‹é—¨å¯¹é—¨æ—¶é—´ (åˆ†é’Ÿ)</label>
                        <input v-model.number="form.commuteSingle" type="number" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                    </div>
                    <div class="mb-3">
                        <label class="inline-flex items-center text-xs font-bold text-rose-500">
                            <input type="checkbox" v-model="form.isCrossHarborPain" class="mr-2 rounded text-rose-500 focus:ring-rose-500"> è¿‡æµ·/é‡‘é’Ÿè½¬è½¦/æ— çš„å£«æŠ¥é”€ (+0.5hç—›æ„Ÿ)
                        </label>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">æ¯æ—¥æ‘¸é±¼æ€»æ—¶é•¿ (åˆ†é’Ÿ)</label>
                        <input v-model.number="form.slackMinutes" type="number" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">æˆ¿ç§Ÿç—›æ„Ÿç³»æ•°</label>
                        <select v-model="form.rentFactor" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                            <option value="1.0">1.0 (æ— ç—›): ä½å®¶/åŒ…ä½/è‡ªç½®</option>
                            <option value="1.1">1.1 (èˆ’é€‚): æˆ¿ç§Ÿ < 20%</option>
                            <option value="1.3">1.3 (ç´§å‡‘): æˆ¿ç§Ÿ 20%-35%</option>
                            <option value="1.6">1.6 (çª’æ¯): æˆ¿ç§Ÿ > 35%</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="block text-xs font-bold text-stone-500 uppercase mb-1">å­¦å†æº¢ä»· (Education Tax)</label>
                        <select v-model="form.eduFactor" class="w-full bg-white/50 border border-stone-200 rounded-xl p-2.5 focus:ring-2 focus:ring-rose-200 outline-none transition">
                            <option value="0.9">0.9: å‰¯å­¦å£«/HD</option>
                            <option value="1.0">1.0: æ™®é€šæœ¬ç§‘/éåæ ¡æµ·å½’</option>
                            <option value="1.1">1.1: æ¸¯ä¸‰/ç¡•å£«</option>
                            <option value="1.2">1.2: å…¨çƒTop 30</option>
                            <option value="1.3">1.3: åšå£« PhD</option>
                        </select>
                    </div>
                </div>

                <button @click="generateImage" class="w-full max-w-sm mx-auto bg-gradient-to-r from-orange-500 to-rose-500 hover:from-orange-600 text-white font-bold py-4 px-3 rounded-xl text-lg shadow-[0_10px_20px_-5px_rgba(244,63,94,0.4)] transform transition hover:scale-105 active:scale-95 flex items-center justify-center">
                    ğŸ“¸ ç”Ÿæˆç»“æœå¡ç‰‡ï¼ˆä¿å­˜å›¾ç‰‡ï¼‰
                </button>
            </div>

            <div class="flex justify-center">
                <div id="result-card" class="relative w-[375px] h-[667px] bg-stone-50 overflow-hidden shadow-2xl" style="font-family: Arial, Helvetica, sans-serif;">
                    
                    <div class="absolute top-0 left-0 w-full h-3 bg-gradient-to-r from-orange-500 to-rose-500 z-20"></div>
                    <div class="absolute inset-0 h-full w-full bg-[#faf9f6] z-0"></div>
                    
                    <div class="relative z-10 p-5 flex flex-col h-full justify-between">
                        <div class="text-center mt-3">
                            <h3 class="text-[10px] tracking-widest text-stone-400 uppercase font-bold" style="letter-spacing: 0.15em;">HK WORK EXPERIENCE REPORT</h3>
                            <h1 class="text-3xl font-black text-stone-800 mt-1 tracking-tight" style="font-weight: 900;">é¦™æ¸¯æ‰“å·¥ä½“éªŒæŠ¥å‘Š</h1>
                        </div>

                        <div class="text-center mt-2 mb-8">
                            <div class="text-stone-400 text-xs mb-1">æ‚¨çš„æ€§ä»·æ¯” R å€¼</div>
                            <div class="text-[80px] font-black score-text leading-[0.9] tracking-tighter" style="font-weight: 900;">
                                {{ finalScore }}
                            </div>
                        </div>

                        <div class="text-center mb-4">
                            <div class="text-2xl font-black tracking-wider" :class="textColor">
                                ã€Œ {{ ratingTitle }} ã€
                            </div>
                            <p class="text-stone-500 text-xs mt-2 px-2 italic font-medium">
                                "{{ ratingQuote }}"
                            </p>
                        </div>

                        <div class="bg-white rounded-xl border border-stone-100 p-3 text-xs shadow-sm">
                            <div class="flex justify-between border-b border-stone-100 pb-1 mb-1">
                                <span class="text-stone-400">ç»¼åˆæ—¥è–ª</span>
                                <span class="font-bold text-stone-700">HK$ {{ dailyPay.toFixed(0) }}</span>
                            </div>
                            <div class="flex justify-between border-b border-stone-100 pb-1 mb-1">
                                <span class="text-stone-400">å®é™…å·¥æ—¶</span>
                                <span class="font-bold text-stone-700">{{ actualWorkHours.toFixed(1) }} hrs</span>
                            </div>
                            <div class="flex justify-between border-b border-stone-100 pb-1 mb-1">
                                <span class="text-stone-400">é€šå‹¤ç—›æ„Ÿ</span>
                                <span class="font-bold text-stone-700">{{ commuteHours.toFixed(1) }} hrs</span> </div>
                            <div class="flex justify-between">
                                <span class="text-stone-400">æˆ¿ç§Ÿ/å­¦å†ç³»æ•°</span>
                                <span class="font-bold text-stone-700">{{ form.rentFactor }} / {{ form.eduFactor }}</span>
                            </div>
                        </div>

                        <div class="mt-3 bg-orange-50/50 p-3 rounded-xl border-l-4 border-orange-400 flex-grow flex flex-col justify-center">
                            <h4 class="font-bold text-orange-800 text-xs mb-2">ğŸ’¡ ä¸“å®¶è¯Šæ–­æŠ¥å‘Š</h4>
                            <p class="text-[11px] text-stone-600 leading-relaxed text-justify opacity-90 mb-2">
                                {{ ratingPortrait }}
                            </p>
                            <p class="text-[11px] text-stone-600 leading-relaxed text-justify opacity-90">
                                {{ ratingAdvice }}
                            </p>
                        </div>

                        <div class="flex items-end justify-between mt-3 pt-2 border-t border-stone-200">
                            <div class="text-left pb-1">
                                <div class="text-[10px] text-stone-400 font-bold">HK-R v6.1 Algorithm</div>
                                <div class="text-[9px] text-stone-300">æ‰«ç æµ‹æµ‹ä½ çš„å·¥ä½œæ€§ä»·æ¯”</div>
                            </div>
                            <div class="bg-white p-1 rounded shadow-sm border border-stone-100">
                                <img :src="qrImageUrl" class="w-14 h-14" alt="QR Code">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-4 text-stone-300 text-xs pb-10">
                æˆªå›¾ä»¥ä¸ŠåŒºåŸŸæˆ–ç‚¹å‡»æŒ‰é’®ä¿å­˜å›¾ç‰‡
            </div>
        </div>
    </transition>

</div>

<script>
    const { createApp, computed, reactive, ref } = Vue;

    createApp({
        setup() {
            const showWelcome = ref(true);
            const siteUrl = "https://vvvv007.github.io/hk-work-test/"; 

            const form = reactive({
                salary: 20000,
                months: 12,
                allowance: 0,
                industry: "1.0",
                migration: "1.0",
                wfh: "1.0",
                vibeScore: "1.0",
                age: 25,
                startTime: "09:00",
                endTime: "18:00",
                lunchHour: 1,
                isLateOT: false,
                commuteSingle: 45, 
                isCrossHarborPain: false,
                slackMinutes: 30,
                rentFactor: "1.3",
                eduFactor: "1.0"
            });

            const startTest = () => {
                showWelcome.value = false;
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const dailyPay = computed(() => {
                const annualPackage = (form.salary * form.months) + form.allowance;
                return annualPackage / 261;
            });

            const actualWorkHours = computed(() => {
                const start = new Date(`2000-01-01T${form.startTime}`);
                const end = new Date(`2000-01-01T${form.endTime}`);
                let diff = (end - start) / 1000 / 60 / 60; 
                if (diff < 0) diff += 24; 
                
                let netWork = diff - form.lunchHour;
                netWork = netWork - (form.slackMinutes / 60);

                if (form.isLateOT) {
                    netWork = netWork * 1.1;
                }
                return Math.max(0.1, netWork);
            });

            const commuteHours = computed(() => {
                let hours = (form.commuteSingle * 2) / 60;
                if (form.isCrossHarborPain) hours += 0.5;
                return hours;
            });

            const slackHours = computed(() => form.slackMinutes / 60);

            const finalScore = computed(() => {
                const numerator = dailyPay.value * Number(form.industry) * Number(form.migration) * Number(form.wfh) * Number(form.vibeScore);
                
                const timeCost = actualWorkHours.value + commuteHours.value + (0.5 * slackHours.value);
                
                const safeTimeCost = Math.max(1, timeCost); 
                const denominator = form.age * safeTimeCost * Number(form.rentFactor) * Number(form.eduFactor);

                if (denominator === 0) return 0;
                return (numerator / denominator).toFixed(2);
            });

            const ratingInfo = computed(() => {
                const r = parseFloat(finalScore.value);
                if (r < 3.3) {
                    return {
                        title: "åœ°ç‹±ç”Ÿå­˜çº¿ ğŸ’€",
                        textColor: "text-stone-800",
                        quote: "æˆ‘åœ¨äººé—´å‡‘æ•°çš„ä¸€å¤©...",
                        portrait: "ğŸ“Š ç”»åƒï¼šæˆ¿ç§Ÿå‹åŠ›å¤§ï¼Œæ— WFHï¼Œé€šå‹¤è¿œï¼Œæˆ–è¡Œä¸šå¤„äºé„™è§†é“¾åº•ç«¯ã€‚æ ‡å‡†çš„è´Ÿèµ„äº§æ‰“å·¥ã€‚",
                        advice: "âš ï¸ å»ºè®®ï¼šé™¤éä¸ºäº†æ¢å–Tier 0çº§çš„è·³æ¿å±¥å†ï¼Œå¦åˆ™è¯·ç«‹åˆ»è·‘è·¯ã€‚"
                    };
                } else if (r < 6.0) {
                    return {
                        title: "æ ‡å‡†æ¸¯ç•œçº¿ ğŸ˜",
                        textColor: "text-stone-500",
                        quote: "æ‰‹åœå£åœï¼Œæ— æƒŠæ— é™©ã€‚",
                        portrait: "ğŸ“Š ç”»åƒï¼šé¦™æ¸¯60%æ‰“å·¥äººçš„çœŸå®çŠ¶æ€ã€‚æœˆè–ªå°šå¯ï¼Œä½†å­˜ä¸ä¸‹å¤§é’±ï¼Œä¸æ•¢è£¸è¾ã€‚",
                        advice: "ğŸ”„ å»ºè®®ï¼šå¿…é¡»å¯»æ‰¾æ æ†ï¼Œé€šè¿‡è·³æ§½æ¶¨è–ªï¼ˆæå‡åˆ†å­ï¼‰æˆ–æ¬å®¶/å›æ·±åœ³ä½ï¼ˆé™ä½åˆ†æ¯ï¼‰æ¥çªç ´ã€‚"
                    };
                } else if (r < 10.5) {
                    return {
                        title: "èˆ’é€‚ä¸­äº§çº¿ â˜•",
                        textColor: "text-orange-600",
                        quote: "ç”Ÿæ´»æœ‰å¾—æ‹£ï¼Œå‡æœŸæœ‰å¾—é£ã€‚",
                        portrait: "ğŸ“Š ç”»åƒï¼šé«˜æ—¥è–ª + ä½æˆ¿ç§Ÿç—›æ„Ÿ + é€‚åº¦WFH çš„å®Œç¾ç»„åˆã€‚",
                        advice: "âœ… å»ºè®®ï¼šæ­å–œï¼ä½ å·²ç»æ‰¾åˆ°äº†é¦™æ¸¯èŒåœºçš„ç”œèœœç‚¹ï¼ˆSweet Spotï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªå€¼å¾—é•¿æœŸå‘å±•çš„ä½ç½®ï¼Œå¥½å¥½äº«å—ç”Ÿæ´»ã€‚"
                    };
                } else {
                    return {
                        title: "ç¥ä»™ç¬‹å·¥ ğŸ¦„",
                        textColor: "text-rose-600",
                        quote: "ä½ æ˜¯ç³»ç»Ÿçš„æ¼æ´ï¼Œä¹Ÿæ˜¯å¥‡è¿¹ã€‚",
                        portrait: "ğŸ“Š ç”»åƒï¼šæ‹¿ç€Global Payåœ¨é¦™æ¸¯Remoteï¼Œæˆ–è€…äº«æœ‰é¡¶çº§Housing Allowanceã€‚",
                        advice: "ğŸ¤« å»ºè®®ï¼šè¯·ç„Šæ­»åœ¨è¿™ä»½å·¥ä½œä¸Šï¼ä¸è¦è®©åˆ«äººçŸ¥é“ä½ æœ‰è¿™ä»½å·¥ä½œï¼Œé—·å£°å‘å¤§è´¢ã€‚"
                    };
                }
            });

            const ratingTitle = computed(() => ratingInfo.value.title);
            const textColor = computed(() => ratingInfo.value.textColor);
            const ratingQuote = computed(() => ratingInfo.value.quote);
            const ratingPortrait = computed(() => ratingInfo.value.portrait);
            const ratingAdvice = computed(() => ratingInfo.value.advice);

            const qrImageUrl = computed(() => {
                return `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(siteUrl)}`;
            });

            const generateImage = () => {
                const element = document.getElementById('result-card');
                html2canvas(element, { 
                    scale: 3, 
                    backgroundColor: null,
                    useCORS: true 
                }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = `HK_Work_Score_${finalScore.value}.png`;
                    link.href = canvas.toDataURL();
                    link.click();
                });
            };

            return {
                showWelcome,
                startTest,
                form,
                dailyPay,
                actualWorkHours,
                commuteHours,
                finalScore,
                ratingTitle,
                textColor, 
                ratingQuote,
                ratingPortrait, 
                ratingAdvice,
                qrImageUrl, 
                generateImage
            };
        }
    }).mount('#app');
</script>

</body>
</html>
